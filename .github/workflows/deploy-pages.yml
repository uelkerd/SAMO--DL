name: Deploy to GitHub Pages

on:
  push:
    branches: [ main ]
    paths:
      - '*.html'
      - '.nojekyll'
      - '.github/workflows/deploy-pages.yml'

jobs:
  deploy:
    runs-on: ubuntu-latest
    permissions:
      pages: write
      id-token: write
    
    steps:
    - name: Checkout
      uses: actions/checkout@v4
      
    - name: Setup Pages
      uses: actions/configure-pages@v4
      
    - name: Prepare website files
      run: |
        # Create a clean directory with only website files
        mkdir -p website-deploy
        cp *.html website-deploy/ 2>/dev/null || true
        cp .nojekyll website-deploy/ 2>/dev/null || true
        cp README.md website-deploy/ 2>/dev/null || true
        
    - name: Upload artifact
      uses: actions/upload-pages-artifact@v3
      with:
        path: 'website-deploy'
        retention-days: 1
        
    - name: Deploy to GitHub Pages
      id: deployment
      uses: actions/deploy-pages@v4 